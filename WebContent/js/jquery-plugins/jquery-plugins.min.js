$.extend({extendPrototype:function(a,c,b){a.superclass=c.prototype;$.extend(a.prototype,c.prototype,b);$.defineAccessors(a)},defineAccessors:function(d){if($.isFunction(d)){var b=d.prototype;for(var c in b){if(c.indexOf("_")==0&&!$.isFunction(b[c])){var a=c.substring(1,c.length);if($.isNotEmpty(b[a])){continue}this.defineAccessor(d,a,c)}}}},defineAccessor:function(c,a,b){c.prototype[a]=function(d){return $.accessor(this,this,b,d)}},accessor:function(b,d,a,c){if($.isUndefined(c)){return d[a]}else{d[a]=c;return b}},namespace:function(c){var e=c.split(".");var b=window;for(var a=0,d=e.length;a<d;a++){if($.isEmpty(b[e[a]])){b[e[a]]={};b=b[e[a]]}else{b=b[e[a]]}}return b},cloneObject:function(a){return $.extend(true,{},a)},isUndefined:function(a){return a==undefined},isNull:function(a){return a==undefined},isEmpty:function(a){return !$.isNotEmpty(a)},isNotEmpty:function(a){return !$.isNull(a)&&!$.isUndefined(a)},isBlank:function(a){return !$.isNotBlank(a)},isNotBlank:function(a){return $.isNotEmpty(a)&&a!=""},isNumeric:function(a){return typeof a==="number"&&isFinite(a)},toNumber:function(a,b){if($.isNotEmpty(a)){if(!$.isNumeric(a)){a=new Number(a);if(!isNaN(a)){return a}}else{return a}}return b},toBoolean:function(a){if(a===true||a===false){return a}return(String(a)=="true")},ltrim:function(a){return String(a).replace(/^[\s|\t|　]+/,"")},rtrim:function(a){return String(a).replace(/[\s|\t|　]+$/,"")},upperCamel:function(a){return a.substring(0,1).toUpperCase()+a.substring(1,a.length)},lowerCamel:function(a){return a.substring(0,1).toLowerCase()+a.substring(1,a.length)},escapeHtml:function(b){var a=$("<div>");a.text(b);return a.html()},unescapeHtml:function(b){var a=$("<div>");a.html(b);return a.text()}});
$.fn.extend({reference:function(d,h,e,f){if(arguments.length==0){this.trigger("dblclick");return}var g="reference";var b=function(i,j){$.ajax({type:"post",url:d,dataType:"json",data:{keyword:i||""},success:function(l,m,k){if($.isNotEmpty(l.id)){j.call(this,l)}else{alert(l.detailMessages.join("\n"))}}})};var c=this;var a=function(j,i){b(i,function(E){var s=$("#"+g);if(s.size()==0){s=$(document.body).append("<div id='"+g+"' class='reference'/>").find("#"+g)}s.unbind();var p=[];var v=65;var t=440;if($.isNotEmpty(f)&&f.search!=false){p.push("<div class='condition'>");p.push("	<form>");p.push("		<input type='text' name='keyword' value='"+i+"'/>");p.push("		<input type='submit' value='検索'/>");p.push("	</form>");p.push("</div>")}else{t-=30}p.push("<div class='total'>");p.push("	全 "+E.records.length+" 件");p.push("</div>");p.push("<table cellspacing='0' cellpadding='0'>");p.push("<tr>");var m=[];for(var A=0,u=E.fields,l=u.length;A<l;A++){m[u[A].name]={field:u[A],index:A}}for(var A=0,l=e.length;A<l;A++){var x=e[A];var r=m[x.name];if($.isNotEmpty(r)&&!x.hidden){var C=r.field.caption||x.name;p.push("<th width='"+x.width+"'>"+C+"</th>");v+=x.width}}p.push("</tr>");p.push("</table>");s.html(p.join(""));var o=s.append("<div class='records'><table id='records' cellspacing='0' cellpadding='0'></table></div>").find("#records");for(var A=0,B=E.records,l=B.length;A<l;A++){var k=B[A];var q=[];var p=[];p.push("<tr index='"+A+"'>");for(var y=0,z=e.length;y<z;y++){var x=e[y];var r=m[x.name];if(r){var w=k[r.index];if(!x.hidden){p.push("<td width='"+(x.width)+"'>"+$.escapeHtml(w)+"</td>")}q[y]=w}}p.push("</tr>");var D=o.append(p.join("")).find("[index="+A+"]");(function(G,F,H){G.bind("mouseover",function(){$(this).toggleClass("over")}).bind("mouseout",function(){$(this).toggleClass("over")}).bind("click",function(){H.call(c,F);s.dialog("close")})})(D,q,h)}if(j){s.dialog($.extend((f||{}),{width:v,height:t,resizable:false,modal:true}))}var n=s.find("[name=keyword]").val(i);s.find("form").on("submit",function(){a(false,n.val());return false})})};this.bind("dblclick",function(){a(true,null)});return this}});
(function(a){a.isHexadecimalColor=function(b){if(b&&b.match&&(b.match(/^#[0-9a-fA-F]{3}$/)||b.match(/^#[0-9a-fA-F]{6}$/))){return true}else{return false}};a.isRGBColor=function(b){if(b&&b.match&&b.match(/^rgb\(([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5])\)$/)){return true}else{return false}};a.isColor=function(b){var c=jQuery;if(c.isHexadecimalColor(b)||c.isRGBColor(b)){return true}else{return false}};a.RGB=function(b){var c=jQuery;if(typeof b=="string"){if(c.isRGBColor(c.fmtColor(b,"rgb"))){return[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)]}return[]}else{if(b instanceof Array&&b.length==3&&isFinite(b[0]-0)&&isFinite(b[1]-0)&&isFinite(b[2]-0)&&(0<=b[0]-0&&b[0]-0<=255)&&(0<=b[1]-0&&b[1]-0<=255)&&(0<=b[2]-0&&b[2]-0<=255)){return"rgb("+b[0]+", "+b[1]+", "+b[2]+")"}}return b};a.colorVectorValue=function(e){var i=jQuery;var j=i.RGB(e);if(j.length==3){var h=j[0],f=j[1],d=j[2];return Math.sqrt((h*h)+(f*f)+(d*d)).toFixed(2)}return 0};a.colorDecimalValue=function(b){var c=jQuery;if(c.isColor(b)){b=c.fmtColor(b,"hexadecimal");return parseInt(b.substr(1,6),16)}return 0};a.fmtColor=function(f,e){var j=jQuery;if(j.isColor(f)==false){return f}var k=function(g){if(g.length<2){for(var c=0,b=2-g.length;c<b;c++){g="0"+g}}return g};if(f.match(/^#[0-9a-fA-F]{3}$/)){var i=f.substr(1,1);var h=f.substr(2,1);var d=f.substr(3,1);f="#"+i+i+h+h+d+d}e=(e)?e:(function(b){if(j.isRGBColor(b)){return"hexadecimal"}else{if(j.isHexadecimalColor(b)){return"rgb"}else{return""}}})(f);if(e=="rgb"&&j.isHexadecimalColor(f)){var i=parseInt(f.substr(1,2),16);var h=parseInt(f.substr(3,2),16);var d=parseInt(f.substr(5,2),16);f=j.RGB([i,h,d])}else{if(e=="hexadecimal"){var l=j.RGB(f);if(l.length==3){var i=k(l[0].toString(16)),h=k(l[1].toString(16)),d=k(l[2].toString(16));f="#"+i+h+d}}}return f};a.modColor=function(c,g,h,d){var k=function(l,p,s,m){if((p=="r"||p=="g"||p=="b")&&isFinite(s)){var n=jQuery;tmp=n.fmtColor(l,"rgb");var t=function(x,w,u){var r=parseInt(x)+(w-0);if(u){r=(r>255)?r-255:r;r=(r<0)?r+255:r}else{r=(r>255)?255:r;r=(r<0)?0:r}return r};if(n.isRGBColor(tmp)){var i=parseInt(RegExp.$1);var o=parseInt(RegExp.$2);var q=parseInt(RegExp.$3);if(p=="r"){i=t(RegExp.$1,s,m)}else{if(p=="g"){o=t(RegExp.$2,s,m)}else{if(p=="b"){q=t(RegExp.$3,s,m)}}}l=n.RGB([i,o,q])}}return l};if(g instanceof Array&&g.length==3){g={r:g[0],g:g[1],b:g[2]}}if(g instanceof Object){d=h;var b=["r","g","b"];for(var e=0,f=b.length;e<f;e++){var j=g[b[e]];if(j&&isFinite(j)){c=k(c,b[e],j,d)}}return c}else{if(typeof g=="string"&&isFinite(h)){return k(c,g,h,d)}}};a.averageColor=function(d){var h=jQuery;var e=[0,0,0];var g=0;for(var f=0,b=d.length;f<b;f++){var j=h.RGB(d[f]);if(j.length==3){e[0]=e[0]+j[0];e[1]=e[1]+j[1];e[2]=e[2]+j[2];g++}}return h.RGB([Math.round(e[0]/g),Math.round(e[1]/g),Math.round(e[2]/g)])};a.colorize=function(h){var g=jQuery;if(typeof h=="string"){var e="#"+h.replace(/o/gi,"0").replace(/[li]/gi,"1").replace(/z/gi,"2").replace(/b/gi,"6").replace(/\?/gi,"7").replace(/q/gi,"9");if(g.isColor(e)){return e}}else{if(h instanceof Object){if(isFinite(h.min)&&isFinite(h.max)&&isFinite(h.value)){var f=h.max-h.min;var j=parseInt(h.value*1677216/f).toString(16);for(var d=0,b=6-j.length;d<b;d++){j="0"+j}return"#"+j}}}return"#000000"};a.fn.modColor=function(g,d,f,c){var e=jQuery;var b=e(this).css(g);e(this).css(g,e.modColor(b,d,f,c));return this};a.fn.averageColor=function(h){h=(h)?h:"backgroundColor";var f=jQuery;var e=[];for(var d=0,b=this.length;d<b;d++){var g=this.eq(d).css(h);if(f.isColor(g)){e.push(g)}}return f.averageColor(e)};a.fn.sortByColor=function(e){var d=jQuery;e=(e)?e:"backgroundColor";var b=function(g,f,i){var h=d.colorDecimalValue(d(g).css(i))-d.colorDecimalValue(d(f).css(i));if(h==0){return d.colorVectorValue(d(g).css(i))-d.colorVectorValue(d(f).css(i))}else{return h}};function c(p,n,m,o){var f=p[parseInt(n+(m-n)/2)];var l=n-1;var g=m+1;while(1){while(b(p[++l],f,o)<0){}while(b(p[--g],f,o)>0){}if(l>=g){break}var k=p[l];p[l]=p[g];p[g]=k}if(n<l-1){c(p,n,l-1,o)}if(g+1<m){c(p,g+1,m,o)}return p}return c(this,0,this.length-1,e)}})(jQuery);
